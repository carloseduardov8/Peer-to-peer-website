<!DOCTYPE HTML>

<html>
	<head>
		<title>Redes Par-a-Par (Peer to Peer Networks)</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrollgress.min.js"></script>
		<script src="js/jquery.scrolly.min.js"></script>
		<script src="js/jquery.slidertron.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
		<link rel="stylesheet" href="css/no-footbar.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="css/ie/v9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<header id="header" class="skel-layers-fixed">
				<h1><a href="index.html">Redes Par-a-Par (Peer to Peer Networks) &nbsp&nbsp<span>GTA - UFRJ</span></a></h1>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Início</a></li>
						<li><a href="introducao.html">Introdução</a></li>
						<li><a href="aplicacoes.html">Aplicações</a></li>
						<li><a href="arquitetura.html">Arquitetura</a></li>
						<li><a href="grafos.html">Análise de Grafos</a></li>
						<li><a href="questoes.html">Questões</a></li>
						<li><a href="bibliografia.html">Bibliografia</a></li>
					</ul>
				</nav>
			</header>

		<!-- Main -->
			<section id="main" class="wrapper style1">
				<header class="major">
					<h2>Arquitetura</h2>
					<p>Princípios, modelos e algoritmos de funcionamento</p>
				</header>
				<div class="container">

					<!-- Content -->
						<section id="content">
							<a href="#" class="image fit"><img src="images/architecture2.png" alt="" class="headerImage"/></a>
							<h3>Um novo paradigma arquitetural</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Nesta seção, iremos comparar a arquitetura Par-a-Par com as características já conhecidas das dinâmicas cliente-servidor, além de explorar
							os diferentes modelos de se conectar uma rede P2P.</p>
							<br>
							<h3>Diferenças entre arquitetura Par-a-Par e Cliente-Servidor</h3>
							<br>
							<table style="width:100%">
								<thead>
										<tr>
											<th>Par-a-Par</th>
											<th>Cliente-Servidor</th>
										</tr>
								</thead>
								<tbody>
									  <tr>
										<td>A informação está distribuída</td>
										<td>A informação fica concentrada</td>
									  </tr>
									  <tr>
										<td>Um computador conecta-se com diversos pares</td>
										<td>Um computador está limitado a se conectar com servidores</td>
									  </tr>
									  <tr>
										<td>A transferência de informações estará ativa desde<br> que existam nós na rede</td>
										<td>Quando um servidor está inoperante, as solicitações dos<br> clientes não podem ser satisfeitas</td>
									  </tr>
									  <tr>
										<td>Pares podem entrar e sair da rede sem debilitá-la</td>
										<td>A troca de um servidor requer uma atualização em seu DNS</td>
									  </tr>
									  <tr>
										<td>Não há nós com funções especiais, ou seja, todos os nós são <br>iguais ou podem ter as mesmas funções</td>
										<td>As funções são bem delimitadas tanto para o servidor quanto para cada cliente</td>
									  </tr>
								</tbody>
							</table>
							
							<br>
							<p class="paragraphText"><span class="spaceTab"></span>Abaixo, apresentamos um gráfico ilustrando a complexidade temporal da distribuição de conteúdo em ambas as arquiteturas. Enquanto um servidor sem técnicas de replicação
							possui uma distribuição serializada, as redes Par-a-Par possibilitam a obtenção de conteúdo e processamento a partir de diferentes nós da rede.</p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/scalability.png" alt="" /></span></div>

							<h3>Redes Sobrepostas</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Sistemas p2p utilizam redes sobrepostas, que são criadas na camada de aplicação, sobre as redes físicas. Podemos entender redes sobrepostas como abstrações da rede física, é uma rede de computadores construída sobre outra rede. Os nós em uma rede de sobreposição são conectados por links virtuais/lógicos, por meio de muitos links físicos na rede subjacente. Redes sobrepostas são usadas para encontrar e reconhecer os pares e tornar a rede p2p independente da topologia da rede física. Por exemplo, quando existe uma conexão entre dois pares, diz-se que existe uma aresta entre eles, o gráfico contendo todos os pares ativos e as arestas entre eles compõem a rede de sobreposição, podemos então abstrair todos os dispositivos que conectam esses dois pares na rede física, e visualizar na rede sobreposta os pares conectados por um link virtual (aresta). </p>
							<p class="paragraphText"><span class="spaceTab"></span>Redes sobrepostas são divididas em:</p>
							<ul class="listItems">
								<li>Redes Não Estruturadas</li>
								<li>Redes Estruturadas</li>
							</ul>
							<a href="#" class="image text"><img src="images/Overlay_p2p.jpg" alt=""></a>

							<br>
							<br>

							<h3>Redes não estruturadas</h3>

							<p class="paragraphText"><span class="spaceTab"></span>As redes não-estruturadas <ins>não possuem uma estrutura definida</ins> na rede de sobreposição e não usam algoritmos específicos para organizar as conexões da rede. Cada nó estabelece conexões aleatoriamente entre outros nós.</p>
							<a href="#" class="image text"><img src="images/P2P-Não-Estruturados_adaptado.jpg" alt=""></a>
							<br/>
							<table style="width:100%">
							  <tr>
							    <th>Vantagens</th>
							    <th>Desvantagens (Sistema de <ins>busca por inundação</ins>)</th>
							  </tr>
							  <tr>
							    <td>Simplicidade: São fáceis de construir</td>
							    <td>A requisição de dados causa muito tráfego de sinalização</td>
							  </tr>
							  <tr>
							    <td>Permitem otimizações em diferentes regiões da sobreposição</td>
							    <td>Não garante a busca do conteúdo pesquisado</td>
							  </tr>
							  <tr>
							    <td>Altamente robustas devido as altas taxas de “rotatividade” dos pares na rede</td>
							    <td>	</td>
							  </tr>
							</table>

							<p class="paragraphText"><span class="spaceTab"></span>Existem três tipos de redes não estruturadas:</p>
							<ul class="listItems">
								<li><ins>P2P pura:</ins> Uma arquitetura de rede p2p pura é completamente descentralizada, não há um elemento central (diferentemente do modelo cliente-servidor), apenas uma camada de roteamento, pois todos os nós possuem papel equivalente, como visto anteriormente, o sistema de busca é por inundação, que gera certas desvantagens.
									No entanto, aplicações P2P “puras” são raras. A maioria das arquiteturas P2P é híbrida, utilizando alguns elementos centralizadores na execução de tarefas cujo desempenho é crítico.<br/>Exemplo:<ins>Gnutella</ins>,<ins>Freenet</ins>.
								</li>
								<li><ins>P2P híbrida:</ins> Nesse tipo de arquitetura existem alguns nós especiais, chamados de supernós. Supernós concedem o ingresso dos nós na rede, indexam os recursos compartilhados pelos nós e liberam a busca por estes recursos. Quando localizado um determinado recurso pode ser obtido a partir da interação direta entre os nós. Uma falha em um supernó pode ser tolerada elegendo dinamicamente outro supernó.<br/>
									Exemplo: <ins>Kazza</ins> e <ins>Bittorrent</ins>.
								</li>
								<li><ins>P2P centralizada:</ins> São redes híbridas, mas também possuem servidores centrais que controlam as entradas e saídas de nós na rede. Os nós registram no servidor central os recursos que compartilharão na rede. As pesquisas por recursos disponíveis nos pares são executadas pelo servidor central, o servidor prove banda e processamento, enquanto o acesso aos recursos é efetuado diretamente entre os pares (transferência de dados é P2P).<br/>
									Exemplo: <ins>eMule</ins>, <ins>Napster</ins>.
								</li>
							</ul>
							<p class="paragraphText"><span class="spaceTab"></span>Exemplos de protocolos P2P não estruturados: <ins>Gnutella</ins>, <ins>Gossip</ins>, <ins>Kazaa</ins>.
							</p>

							<h3>Redes Estruturadas</h3>
							<p class="paragraphText"><span class="spaceTab"></span>As redes estruturadas usam algoritmos e critérios específicos para organizar as conexões da rede. Possuem protocolos que garantem que qualquer nó possa encaminhar uma busca a outro nó que dispõe do arquivo desejado. O procedimento mais utilizado é usando o protocolo DHT (Distributed Hash Tables), ele organiza os processos através de uma tabela hash distribuída. O DHT garante que qualquer nó pode eficientemente buscar na rede um recurso ou arquivo, mesmo quando esse dado recurso é muito raro. </p>

							<br>


							<h3>Distributed Hash Table (DHT)</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Esta classe de sistema distribuído, diferentemente das demais, oferece uma forma de roteamento mais estruturada de modo a obter tanto descentralização quanto eficiência. Uma DHT é particularmente útil quando deseja-se criar um banco de dados distribuído de modo a alcançar maior escalabilidade.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Isso é feito distribuindo-se pares de chaves e valores <i>(key, value)</i> entre os nós da rede de maneira que cada nó tenha posse de apenas um pequeno subconjunto da dupla (chave, valor). Qualquer nó na rede pode realizar uma consulta no banco de dados com uma chave. O banco de dados localizará os nós que possuem o par (chave, valor) correspondente e retornará à informação para o nó que iniciou a consulta (Quando nos referimos à “chave”, estamos nos referindo ao hash da chave original.).</p>
							<p class="paragraphText"><span class="spaceTab"></span>Uma abordagem <b><ins>não</ins></b> escalável para se criar o banco de dados é fazer com que cada nó mantenha uma lista dos endereços IP de todos os nós participantes da rede, pois exigiria que cada nó rastreasse todos os outros nós, e que cada consulta fosse enviada a todos os nós.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Uma abordagem mais efetiva consiste em atribuir um identificador a cada nó, onde cada identificador é um número inteiro de 0 a 2^(n-1). De modo que o número de vizinhos por nó e número de mensagens por consulta seja mantido em um tamanho aceitável, uma forma de fazer isso é usar a sobreposição circular.</p>
							<li><b>Circular Distributed Hash Table</b></li>
							<p class="paragraphText"><span class="spaceTab"></span>Para lidar com o problema de escalabilidade, podemos organizar os nós em um círculo. Onde cada nó só mantém o controle do seu sucessor imediato. Particularmente, cada nó só conhece, seu sucessor imediato e seu antecessor imediato. </p>
							<a href="#" class="image text"><img src="images/DHT_circular.png" alt=""></a>
							<p class="paragraphText"><span class="spaceTab"></span>Por exemplo (figura A): Supondo que o nó 7 deseja se comunicar com o nó responsável pela chave 15, para inserir ou consultar um par (valor, chave). Usando a sobreposição circular, o nó 7 envia uma mensagem para o seu sucessor imediato, o nó 9, perguntando quem é o responsável pela chave 15. O nó 9 não é o responsável pela chave 15, logo ele repassa a mensagem para o seu sucessor imediato. Assim o DHT circular fornece uma solução para reduzir a quantidade de informações de sobreposição que cada nó deve gerenciar.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Porém, essa solução apresenta outro problema, para encontrar o nó responsável por uma determinada chave, no pior dos casos, todos os N nós no DHT terão que encaminhar uma mensagem ao redor do círculo.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Podemos melhorar ainda mais a sobreposição circular, adicionando atalhos para que cada par não apenas acompanhe seu sucessor imediato, mas também de um número pequeno de pares atalhos espalhados no círculo. Reduzindo consideravelmente o número de mensagens usadas para processar uma consulta (facilita o roteamento de mensagens de uma busca).</p>
							<p class="paragraphText"><span class="spaceTab"></span>Com DHT circular mais “atalhos” (figura B), usando o exemplo anterior, agora o nó 7 pode se comunicar diretamente com o nó responsável pela chave 15.</p>

							<h2>Algoritmos e Modelos</h2>

							<h3>Diretório Centralizado</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Neste modelo, os pares da rede se conectam a um diretório central onde publicam informações sobre o conteúdo que oferecem.
							Quando um nó realiza um pedido, o diretório central responde à solicitação associando 
							a requisição ao melhor nó do diretório que o corresponde. Esta escolha de melhor nó é feita utilizando uma métrica que pode levar em conta o custo, a velocidade ou a disponibilidade de cada par.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Uma aplicação deste paradigma é o Napster, um serviço de música online P2P encerrado em 2002. 
							Devido ao fato de requerer um servidor de diretório para fins de gerenciamento (como hospedar informações dos participantes), este modelo pode ser classificado como uma rede híbrida. 
							Sendo assim, sua escalabilidade fica comprometida devido à necessidade de servidores maiores e mais robustos para cumprir a demanda à medida que o número de usuários aumenta.</p>
							<div class="4u 6u(3) centerImage size0-6"><span class=" image fit"><img src="images/centraldirectory.png" alt="" /></span></div>
							<br>
							<br>
							
							<h3>Busca por Inundação</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Em contraste com o modelo de Diretório Centralizado descrito acima, a Busca por Inundação pode ser considerada P2P pura. 
							Neste caso, não há um sistema central de gerenciamento que anuncia o compartilhamento de recursos. A busca por determinado arquivo é realizada enviando-se uma mensagem a todos os nós adjacentes. 
							Tais vizinhos também enviam recursivamente uma mensagem aos demais nós conectados a eles, até que um número máximo de saltos (TTL) seja alcançado.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Notamos que este modelo também não é muito escalável, 
							já que a requisição de dados causa muito tráfego de sinalização sem haver garantias de que o arquivo solicitado será encontrado. 
							Por outro lado, se o objetivo do sistema é alcançar todos os nós da rede ou obter conteúdos raros (compartilhados entre poucos nós), este modelo mostra-se eficaz desde que o TTL da implementação seja suficientemente elevado. </p>
							<br>
							<div class="4u 6u(3) centerImage size0-5"><span class=" image fit"><img src="images/floodrequest.png" alt="" /></span></div>
							<br>
							<br>
							
							<h3>Roteamento de Documento</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Trata-se de uma abordagem mais recente, adotada por aplicações como a FreeNet (uma plataforma par-a-par de comunicação anti-censura) que
							também objetiva o compartilhamento de arquivos. 
							Este modelo funciona atribuindo-se um ID aleatório a cada par presente na rede, além de garantir que cada par também saiba o número de uma certa quantidade de outros pares. Um documento ou arquivo compartilhado, por sua vez, 
							também possui um ID, baseado em uma função <i>Hash</i> aplicada ao seu nome e ao seu conteúdo. O arquivo será, então, roteado por cada nó buscando sempre o vizinho cujo ID possua a maior semelhança com o ID do arquivo. Este processo de 
							roteamento é repetido até que o arquivo "chegue" ao par de ID mais próximo. É importante destacar que, a cada operação de roteamento, é reservada uma cópia local do arquivo em cada par participante da rota. </p>
							<p class="paragraphText"><span class="spaceTab"></span>O processo de busca é análogo ao de armazenar um arquivo recém compartilhado na rede. Assim, o pedido é direcionado ao par cujo ID 
							é o mais semelhante ao ID do arquivo desejado. Isto é repetido até que o conteúdo seja encontrado e enviado ao nó que realizou a solicitação. A necessidade de se conhecer o ID do documento de 
							antemão torna a busca mais complicada do que, por exemplo, no modelo de inundação, mas o número de mensagens de controle é significativamente menor.
							</p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/documentrouting.png" alt="" /></span></div>
							<br>
						</section>

				</div>
			</section>



		<!-- Footer -->
			<footer id="footer">

				<span class="copyright">
					&copy; Copyright. Todos os direitos reservados. Template por <a href="http://www.html5webtemplates.co.uk">Responsive Web Templates</a>
					<br>Autores deste website: Carlos Eduardo Marciano, Felipe Assis de Souza, Raul Baptista de Souza.
					<br>Sob orientação do professor Luís Henrique Kosmalski Costa, da disciplina Redes de Computadores I (EEL878).
				</span>
			</footer>

	</body>
</html>
