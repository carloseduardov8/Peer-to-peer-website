<!DOCTYPE HTML>

<html>
	<head>
		<title>Redes Par-a-Par (Peer to Peer Networks)</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.dropotron.min.js"></script>
		<script src="js/jquery.scrollgress.min.js"></script>
		<script src="js/jquery.scrolly.min.js"></script>
		<script src="js/jquery.slidertron.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-layers.min.js"></script>
		<script src="js/init.js"></script>
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
		<link rel="stylesheet" href="css/no-footbar.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="css/ie/v9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<header id="header" class="skel-layers-fixed">
				<h1><a href="index.html">Redes Par-a-Par (Peer to Peer Networks) &nbsp&nbsp<span>GTA - UFRJ</span></a></h1>
				<nav id="nav">
					<ul>
						<li><a href="index.html">Início</a></li>
						<li><a href="introducao.html">Introdução</a></li>
						<li><a href="aplicacoes.html">Aplicações</a></li>
						<li><a href="arquitetura.html">Arquitetura</a></li>
						<li><a href="grafos.html">Análise de Grafos</a></li>
						<li><a href="questoes.html">Questões</a></li>
						<li><a href="bibliografia.html">Bibliografia</a></li>
					</ul>
				</nav>
			</header>

		<!-- Main -->
			<section id="main" class="wrapper style1">
				<header class="major">
					<h2>Arquitetura</h2>
					<p>Princípios, modelos e algoritmos de funcionamento</p>
				</header>
				<div class="container">

					<!-- Content -->
						<section id="content">
							<a href="#" class="image fit"><img src="images/architecture2.png" alt="" class="headerImage"/></a>
							<br>
							<h2>Arquitetura Par-a-Par</h2>
							<p class="paragraphText"><span class="spaceTab"></span>Nesta seção, iremos comparar a arquitetura Par-a-Par com as características já conhecidas das dinâmicas cliente-servidor, além de explorar
							os diferentes modelos de se conectar uma rede P2P.</p>
							<br>
							<h3>Diferenças entre arquitetura Par-a-Par e Cliente-Servidor</h3>
							<br>
							<table style="width:100%">
								<thead>
										<tr>
											<th>Par-a-Par</th>
											<th>Cliente-Servidor</th>
										</tr>
								</thead>
								<tbody>
									  <tr>
										<td>A informação está distribuída</td>
										<td>A informação fica concentrada</td>
									  </tr>
									  <tr>
										<td>Um computador conecta-se com diversos pares</td>
										<td>Um computador está limitado a se conectar com servidores</td>
									  </tr>
									  <tr>
										<td>A transferência de informações estará ativa desde<br> que existam nós na rede</td>
										<td>Quando um servidor está inoperante, as solicitações dos<br> clientes não podem ser satisfeitas</td>
									  </tr>
									  <tr>
										<td>Pares podem entrar e sair da rede sem debilitá-la</td>
										<td>A troca de um servidor requer uma atualização em seu DNS</td>
									  </tr>
									  <tr>
										<td>Não há nós com funções especiais, ou seja, todos os nós são <br>iguais ou podem ter as mesmas funções</td>
										<td>As funções são bem delimitadas tanto para o servidor quanto <br>para cada cliente</td>
									  </tr>
								</tbody>
							</table>
							
							<br>
							<p class="paragraphText"><span class="spaceTab"></span>Abaixo, apresentamos um gráfico ilustrando a complexidade temporal da distribuição de conteúdo em ambas as arquiteturas. Enquanto um servidor sem técnicas de replicação
							possui uma distribuição serializada, as redes Par-a-Par possibilitam a obtenção de conteúdo e processamento a partir de diferentes nós da rede.</p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/scalability.png" alt="" /></span></div>
							<br>

							<h3>Arquitetura Par-a-Par e o Conceito de Rede Sobreposta</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Para continuarmos a estudar a arquitetura Par-a-Par, é necessário compreender o conceito de redes sobrepostas. Provenientes do inglês <i>"overlay networks"</i>, tais redes são
							construídas em cima de outras já existentes que, por sua vez, fornecem infraestrutura. Assim, um laço virtual entre dois nós de uma rede sobreposta pode corresponder, na verdade, a diversos outros laços da rede infraestrutural.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Este tipo de abstração é de grande relevância à arquitetura Par-a-Par por possibilitar que pares se encontrem e se reconheçam de forma independente da topologia física. Assim,
							ao representarmos uma conexão entre dois pares de uma rede P2P utilizando apenas uma aresta, estamos capturando apenas as informações que de fato são relevantes para a topologia da rede Par-a-Par, sem ser necessário levar em conta as
							rotas pelas quais os pacotes serão roteados. A imagem abaixo ilustra este conceito:</p>
							
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/Overlay_p2p.jpg" alt="" /></span></div>
							
							<p class="paragraphText"><span class="spaceTab"></span>Assim, dedicamos duas das seções abaixo para tratar dos dois tipos de redes sobrepostas que são bastante encontrados na arquitetura Par-a-Par: 
							as redes estruturadas e as não-estruturadas.</p>

							<br>
							<br>

							<h3>Redes sobrepostas não-estruturadas</h3>

							<p class="paragraphText"><span class="spaceTab"></span>As redes não-estruturadas não possuem uma estrutura definida na rede de sobreposição e não usam algoritmos específicos para organizar 
							as conexões da rede, sendo que cada nó estabelece conexões aleatoriamente entre outros nós. A imagem abaixo ilustra e complementa essa definição, sinalizando pontos fortes e fracos:</p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/P2P-Não-Estruturados_adaptado.jpg" alt="" /></span></div>
							<br>

							<p class="paragraphText"><span class="spaceTab"></span>Podemos ainda classificar as redes não-estruturadas em três tipos distintos, dependendo da maneira como a arquitetura P2P é utilizada:</p>
							<ul class="listItems">
								<li><u>P2P pura:</u> Nesta modalidade, a arquitetura é completamente descentralizada e não há um elemento central, sendo o completo oposto do modelo cliente-servidor.
								Todos os nós possuem papel equivalente e o sistema de busca é por inundação, gerando certas desvantagens. Exemplos são o <i>Gnutella</i> e o <i>Freenet</i>. Devido às desvantagens, aplicações P2P “puras” 
								são raras e a maioria das arquiteturas P2P é híbrida, utilizando alguns elementos centralizadores na execução de tarefas cujo desempenho é mais crítico.
								</li>
								<li><u>P2P híbrida:</u> Aqui, existem alguns nós especiais, chamados de supernós, que realizam ações de coordenação como conceder o ingresso dos nós na rede, indexar os dados compartilhados 
								e liberar a busca por recursos que, quando localizados, podem ser trocados a partir da interação direta entre os nós convencionais. Dependendo da implementação, uma falha em um supernó pode ser 
								tolerada de diversas formas, como, por exemplo, escolhendo-se um outro supernó.	Exemplos de redes P2P híbridas são o <i>Kazza</i> e o <i>Bittorrent</i>.
								</li>
								<li><u>P2P centralizada:</u> Apesar de serem redes híbridas, possuem verdadeiros servidores centrais que controlam as entradas e as saídas dos nós na rede, nos quais cada par deve registrar os recursos a serem
								compartilhados. As pesquisas por recursos disponíveis são executadas pelo servidor central, enquanto o acesso aos recursos é efetuado diretamente entre os pares no mesmo paradigma de transferência Par-a-Par.
								Exemplos desse paradigma centralizador são o <i>eMule</i> e o <i>Napster</i>.
								</li>
							</ul>
							
							<br>

							<h3>Redes sobrepostas estruturadas</h3>
							<p class="paragraphText"><span class="spaceTab"></span>As redes estruturadas usam algoritmos e critérios específicos para organizar as conexões da rede. Sendo assim, possuem protocolos que garantem que 
							qualquer nó possa encaminhar uma busca a outro nó que disponha do arquivo desejado. O procedimento mais utilizado é, em geral, uma implementação de <b>tabelas <i>hash</i> distribuídas</b> (DHT, do inglês <i>Distributed Hash Tables</i>), 
							garantindo que qualquer nó possa buscar na rede um recurso ou arquivo de forma eficente, mesmo quando tal recurso for significativamente raro.</p>

							<br>
							
							<hr>
							<br>
							
							<h2>Algoritmos e Modelos</h2>
							
							<p class="paragraphText"><span class="spaceTab"></span>Nesta seção, entraremos em detalhes
							sobre as características das diferentes implementações de DHT, além de comentar sobre outras técnicas utilizadas em redes Par-a-Par.</p>


							<h3>Tabelas <i>Hash</i> Distribuídas (DHT)</h3>
							
							<p class="paragraphText"><span class="spaceTab"></span>Esta classe de sistema distribuído oferece uma forma de roteamento mais estruturada de modo a obter 
							tanto descentralização quanto eficiência. Uma DHT é particularmente útil quando deseja-se criar um banco de dados distribuído de modo a alcançar maior escalabilidade.</p>
							
							<p class="paragraphText"><span class="spaceTab"></span>Para atingir este objetivo, distribui-se tuplas de <i>(chave, valor)</i> entre os nós da rede de maneira que cada nó tenha posse de 
							apenas um pequeno subconjunto de todas as tuplas <i>(chave, valor)</i> existentes. Assim, qualquer nó na rede, em posse de uma chave, poderá realizar uma consulta no banco de dados, que localizará os nós que possuem 
							a tupla <i>(chave, valor)</i> correspondente e retornará a informação para o nó que iniciou a consulta. Precisamos, então, pensar em estratégias de identificar facilmente qual nó possui qual tupla.</p>
							
							<p class="paragraphText"><span class="spaceTab"></span>Uma abordagem ingênua e <b>não</b> escalável para se criar o banco de dados seria fazer com que cada nó mantivesse uma lista dos endereços IP de todos os nós
							participantes da rede. No entanto, isto exigiria que cada nó individual rastreasse todos os outros, quebrando a ideia de conectividade ad-hoc. Logo, uma abordagem mais efetiva seria atribuir um identificador 
							a cada nó da rede, em que cada ID seria um número inteiro de 0 a 2<sup>(n-1)</sup>. Se distribuirmos as tuplas <i>(chave, valor)</i> de modo que cada nó receba uma tupla apenas se seu ID for o mais próximo de um <b>hash</b> da chave correspondente,
							poderemos encontrá-lo mais facilmente no futuro. A tabela abaixo exemplifica os diferentes campos de informação existentes.</p>
							
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/dht_example.png" alt="" /></span></div>
							<br>
							
							<p class="paragraphText"><span class="spaceTab"></span>De fato, a abordagem descrita acima é amplamente utilizada nos sistemas de DHT. Vamos ver agora um exemplo em que os pares <i>(chave, valor)</i> serão distribuídos
							de acordo com a seguinte regra: um par (K, valor) será dado para o nó J, em que J é o sucessor imediato do resultado do hash de K. Para ilustrar, suponha um espaço de ID {0, 1, 2, 3, ..., 63}. Os 8 nós da rede possuem
							os IDs 1, 12, 13, 25, 32, 40, 48, 60. Se o hash da chave for 51, iremos dar sua tupla <i>(chave, valor)</i> ao nó 60. Se o hash da chave for 60, sua tupla também irá para o nó 60. Se for 61, daremos a tupla para o nó 1. Este é apenas
							um exemplo,	podendo existir diferentes outras regras de atribuição que irão depender da implementação.</p>
							
							<li><b>Circular Distributed Hash Table</b></li>
							<p class="paragraphText"><span class="spaceTab"></span>Para lidar com o problema de escalabilidade, podemos organizar os nós em um círculo. Onde cada nó só mantém o controle do seu sucessor imediato. Particularmente, cada nó só conhece, seu sucessor imediato e seu antecessor imediato. </p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/DHT_circular.png" alt="" /></span></div>
							<br>
							<p class="paragraphText"><span class="spaceTab"></span>Por exemplo (figura A): Supondo que o nó 7 deseja se comunicar com o nó responsável pela chave 15, para inserir ou consultar um par (valor, chave). Usando a sobreposição circular, o nó 7 envia uma mensagem para o seu sucessor imediato, o nó 9, perguntando quem é o responsável pela chave 15. O nó 9 não é o responsável pela chave 15, logo ele repassa a mensagem para o seu sucessor imediato. Assim o DHT circular fornece uma solução para reduzir a quantidade de informações de sobreposição que cada nó deve gerenciar.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Porém, essa solução apresenta outro problema, para encontrar o nó responsável por uma determinada chave, no pior dos casos, todos os N nós no DHT terão que encaminhar uma mensagem ao redor do círculo.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Podemos melhorar ainda mais a sobreposição circular, adicionando atalhos para que cada par não apenas acompanhe seu sucessor imediato, mas também de um número pequeno de pares atalhos espalhados no círculo. Reduzindo consideravelmente o número de mensagens usadas para processar uma consulta (facilita o roteamento de mensagens de uma busca).</p>
							<p class="paragraphText"><span class="spaceTab"></span>Com DHT circular mais “atalhos” (figura B), usando o exemplo anterior, agora o nó 7 pode se comunicar diretamente com o nó responsável pela chave 15.</p>

							<br>
							<h3>Diretório Centralizado</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Neste modelo, os pares da rede se conectam a um diretório central onde publicam informações sobre o conteúdo que oferecem.
							Quando um nó realiza um pedido, o diretório central responde à solicitação associando 
							a requisição ao melhor nó do diretório que o corresponde. Esta escolha de melhor nó é feita utilizando uma métrica que pode levar em conta o custo, a velocidade ou a disponibilidade de cada par.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Uma aplicação deste paradigma é o Napster, um serviço de música online P2P encerrado em 2002. 
							Devido ao fato de requerer um servidor de diretório para fins de gerenciamento (como hospedar informações dos participantes), este modelo pode ser classificado como uma rede híbrida. 
							Sendo assim, sua escalabilidade fica comprometida devido à necessidade de servidores maiores e mais robustos para cumprir a demanda à medida que o número de usuários aumenta.</p>
							<div class="4u 6u(3) centerImage size0-6"><span class=" image fit"><img src="images/centraldirectory.png" alt="" /></span></div>
							<br>
							<br>
							
							<h3>Busca por Inundação</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Em contraste com o modelo de Diretório Centralizado descrito acima, a Busca por Inundação pode ser considerada P2P pura. 
							Neste caso, não há um sistema central de gerenciamento que anuncia o compartilhamento de recursos. A busca por determinado arquivo é realizada enviando-se uma mensagem a todos os nós adjacentes. 
							Tais vizinhos também enviam recursivamente uma mensagem aos demais nós conectados a eles, até que um número máximo de saltos (TTL) seja alcançado.</p>
							<p class="paragraphText"><span class="spaceTab"></span>Notamos que este modelo também não é muito escalável, 
							já que a requisição de dados causa muito tráfego de sinalização sem haver garantias de que o arquivo solicitado será encontrado. 
							Por outro lado, se o objetivo do sistema é alcançar todos os nós da rede ou obter conteúdos raros (compartilhados entre poucos nós), este modelo mostra-se eficaz desde que o TTL da implementação seja suficientemente elevado. </p>
							<br>
							<div class="4u 6u(3) centerImage size0-5"><span class=" image fit"><img src="images/floodrequest.png" alt="" /></span></div>
							<br>
							<br>
							
							<h3>Roteamento de Documento</h3>
							<p class="paragraphText"><span class="spaceTab"></span>Trata-se de uma abordagem mais recente, adotada por aplicações como a FreeNet (uma plataforma par-a-par de comunicação anti-censura) que
							também objetiva o compartilhamento de arquivos. 
							Este modelo funciona atribuindo-se um ID aleatório a cada par presente na rede, além de garantir que cada par também saiba o número de uma certa quantidade de outros pares. Um documento ou arquivo compartilhado, por sua vez, 
							também possui um ID, baseado em uma função <i>Hash</i> aplicada ao seu nome e ao seu conteúdo. O arquivo será, então, roteado por cada nó buscando sempre o vizinho cujo ID possua a maior semelhança com o ID do arquivo. Este processo de 
							roteamento é repetido até que o arquivo "chegue" ao par de ID mais próximo. É importante destacar que, a cada operação de roteamento, é reservada uma cópia local do arquivo em cada par participante da rota. </p>
							<p class="paragraphText"><span class="spaceTab"></span>O processo de busca é análogo ao de armazenar um arquivo recém compartilhado na rede. Assim, o pedido é direcionado ao par cujo ID 
							é o mais semelhante ao ID do arquivo desejado. Isto é repetido até que o conteúdo seja encontrado e enviado ao nó que realizou a solicitação. A necessidade de se conhecer o ID do documento de 
							antemão torna a busca mais complicada do que, por exemplo, no modelo de inundação, mas o número de mensagens de controle é significativamente menor.
							</p>
							<br>
							<div class="4u 6u(3) centerImage size1"><span class=" image fit"><img src="images/documentrouting.png" alt="" /></span></div>
							<br>
						</section>

				</div>
			</section>



		<!-- Footer -->
			<footer id="footer">

				<span class="copyright">
					&copy; Copyright. Todos os direitos reservados. Template por <a href="http://www.html5webtemplates.co.uk">Responsive Web Templates</a>
					<br>Autores deste website: Carlos Eduardo Marciano, Felipe Assis de Souza, Raul Baptista de Souza.
					<br>Sob orientação do professor Luís Henrique Kosmalski Costa, da disciplina Redes de Computadores I (EEL878).
				</span>
			</footer>

	</body>
</html>
